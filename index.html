<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RLUSD Supply Monitor</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        #supplyChart { max-width: 800px; margin-bottom: 20px; }
        table { border-collapse: collapse; width: 100%; max-width: 800px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>RLUSD Total Supply (Last 30 Days)</h1>
    <canvas id="supplyChart"></canvas>
    <h2>Supply Change Log</h2>
    <table id="changeLog">
        <thead>
            <tr>
                <th>Date</th>
                <th>Quantity Added</th>
                <th>Total Supply</th>
            </tr>
        </thead>
        <tbody id="logBody"></tbody>
    </table>

    <script>
        fetch('data.json')
            .then(response => response.json())
            .then(supplyData => {
                // Chart setup
                const ctx = document.getElementById('supplyChart').getContext('2d');
                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: supplyData.map(d => d.date),
                        datasets: [{
                            label: 'RLUSD Total Supply',
                            data: supplyData.map(d => d.supply),
                            borderColor: 'blue',
                            fill: false
                        }]
                    },
                    options: {
                        scales: {
                            x: { title: { display: true, text: 'Date' } },
                            y: { title: { display: true, text: 'Total Supply' } }
                        }
                    }
                });

                // Log setup (only non-zero changes)
                const logBody = document.getElementById('logBody');
                let lastSupply = supplyData[0].supply;
                supplyData.slice(1).forEach(entry => {
                    const change = entry.supply - lastSupply;
                    // Only log if change is significant (not 0)
                    if (Math.abs(change) > 0.01) { // Small threshold to avoid floating-point noise
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td>${entry.date}</td>
                            <td>${change > 0 ? '+' : ''}${change.toFixed(2)}</td>
                            <td>${entry.supply.toFixed(2)}</td>
                        `;
                        logBody.appendChild(row);
                    }
                    lastSupply = entry.supply;
                });
            })
            .catch(error => console.error('Error loading data:', error));
    </script>
</body>
</html>
Changes Explained
Normalization in fetch-supply.js:
Fetches both market_caps and prices from CoinGecko.
Calculates supply = marketCap / price to normalize to the true circulating supply, removing price fluctuation effects.
Keeps the unique-date logic for daily granularity.
Log Filtering in index.html:
Adds a condition (Math.abs(change) > 0.01) to only log entries where the supply change is non-zero (with a small threshold to account for floating-point imprecision).
Formats numbers to 2 decimal places for clarity.
Expected Outcome
Chart: Shows a stable RLUSD supply over 30 days, with changes only when actual supply (e.g., minting or burning) occurs, not price wiggles.
Log: Lists only days with non-zero supply changes (e.g., +10000 or -5000), making it concise. Most days should show 0 change unless RLUSD issuance changes, which aligns with a stablecoinâ€™s behavior.
Steps to Apply
Replace fetch-supply.js in your repo with the updated version.
Replace index.html with the updated version.
Commit and push both files to your main branch.
Wait for the next daily workflow run (or trigger it manually) to update data.json.
Reload your GitHub Pages site (e.g., https://pintuwang.github.io/RLUSD) to see the corrected chart and log.
Verification
After the update, check the log. It should now only show meaningful supply changes (likely fewer entries), and the total supply should reflect the normalized circulating supply, not market cap swings.
Let me know if you see unexpected results or need further tweaks!

